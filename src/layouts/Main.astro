---
// Main.astro
import "../styles/global.css";
import Footer from "../components/Footer.astro";
const { title = "Erick Holgado"} = Astro.props;
const urlParams = new URLSearchParams(Astro.url.search);
const lang = urlParams.get('lang') === 'en' ? 'en' : 'es';

const navLinks = lang === 'en'
  ? [
      { href: '/', text: 'Home' },
      { href: '/proyectos', text: 'Projects' },
      { href: '/sobremi', text: 'About Me' }
    ]
  : [
      { href: '/', text: 'Inicio' },
      { href: '/proyectos', text: 'Proyectos' },
      { href: '/sobremi', text: 'Sobre mÃ­' }
    ];
---

<html lang={lang} class="scroll-smooth">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>{title}</title>
        <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    </head>

    <body class="flex flex-col min-h-screen bg-white dark:bg-neutral-900 text-gray-900 dark:text-gray-100 font-sans">

        <nav class="w-full border-b border-neutral-200 dark:border-neutral-700 px-6 py-4 flex justify-between items-center">
            <div class="hidden md:flex gap-8 text-lg font-medium">
                {navLinks.map(link => (
                <a href={link.href + (lang === 'en' ? '?lang=en' : '')}>{link.text}</a>))}
            </div>

            <div class="flex gap-2">
                <button id="lang-toggle"
                    class="px-3 py-1 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:opacity-80 transition shadow-lg z-50">
                    {lang === 'en' ? 'ES' : 'EN'}
                </button>

                <button id="dark-toggle"
                    class="px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:opacity-80 transition shadow-lg z-50">
                    {lang === 'en' ? 'Dark Mode ðŸŒ™' : 'Modo Oscuro ðŸŒ™'}
                </button>
            </div>

            <button id="menu-toggle" class="md:hidden flex flex-col justify-between w-6 h-5">
                <span class="block h-0.5 w-full bg-gray-900 dark:bg-gray-100"></span>
                <span class="block h-0.5 w-full bg-gray-900 dark:bg-gray-100"></span>
                <span class="block h-0.5 w-full bg-gray-900 dark:bg-gray-100"></span>
            </button>
        </nav>

        <div id="mobile-menu" class="hidden md:hidden bg-white dark:bg-neutral-900 border-b border-neutral-200 dark:border-neutral-700 px-6 py-4 flex flex-col gap-4">
            {navLinks.map(link => (<a href={link.href + (lang === 'en' ? '?lang=en' : '')} class="hover:text-blue-500 transition">{link.text}</a>))}
        </div>

        <main class="flex-grow max-w-4xl mx-auto px-6 py-8">
            <slot />
        </main>

        <footer class="mt-auto">
            <Footer />
        </footer>

        <script>
            const btn = document.getElementById('dark-toggle');
            const html = document.documentElement;

            btn.textContent = html.classList.contains('dark') ? 'Light Mode â˜€ï¸' : 'Dark Mode ðŸŒ™';

            btn.addEventListener('click', () => {
            html.classList.toggle('dark');
            btn.textContent = html.classList.contains('dark') ? 'Light Mode â˜€ï¸' : 'Dark Mode ðŸŒ™';
            });
            
            const menuBtn = document.getElementById('menu-toggle');
            const mobileMenu = document.getElementById('mobile-menu');
            menuBtn.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');});


            const langBtn = document.getElementById('lang-toggle');
            langBtn.addEventListener('click', () => {
            const url = new URL(window.location.href);
            if (url.searchParams.get('lang') === 'en') {
                url.searchParams.delete('lang');
            } else {
                url.searchParams.set('lang', 'en');
            }window.location.href = url.toString();});

        </script>
    </body>
</html>